ğŸ§± Extended Plugin Build Plan
ğŸ¯ Objective: Enhance network control, UI clarity, and config flexibility.
Hereâ€™s how weâ€™ll tackle each file:

1ï¸âƒ£ privilege-checks.php
ğŸ” Purpose: Enforce user capabilities across subsites or restrict sensitive actions to â€œmain admins.â€

ğŸš§ Steps to Build:

Define dua_can_link_users($user_id) to check if the current user has authority to link/unlink.

Add logic to detect if the current site is the main site or a subsite.

Optionally integrate role restrictions: allow only admins or a specific capability to perform linkage.

Provide helper like dua_get_main_site_id() if needed for centralized checks.

2ï¸âƒ£ admin-ui.php
ğŸ–¥ Purpose: Render the interface for managing linked users (link/unlink), role visibility, and deletion warnings.

ğŸš§ Steps to Build:

Fetch all users scoped to current site_id and their linkage info.

Display a sortable table with:

ğŸ§© Role badge (via dua_get_user_role_label)

ğŸ”— Link status (linked / unlinked)

ğŸ›  Actions (Link / Unlink / View Profile)

Add conditional buttons with class dua-unlink-user or dua-link-user for admin.js support.

Use WordPress UI styles (<table class="wp-list-table">) for familiar look.

3ï¸âƒ£ settings-page.php
âš™ï¸ Purpose: Offer a configuration panel for plugin behavior â€” optional but powerful.

ğŸš§ Steps to Build:

Register settings page via add_options_page()

Create options like:

Toggle linkage enforcement (dua_enforce_linking)

Default role when linking a user

Enable/disable deletion warnings

Store settings using register_setting() and retrieve via get_option()

Localize strings with __() for .pot compatibility